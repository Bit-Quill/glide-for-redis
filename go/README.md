# Summary - Go Wrapper

This module contains a POC Go-client wrapper that connects to the `Babushka`-rust-client. The rust client connects to
redis, while this wrapper provides Go-language binding. The objective of this wrapper is to provide a thin-wrapper
language api to enhance performance and limit cpu cycles at scale.

## Organization

The Go client contains the following parts:

1. A Go client: wrapper to rust-client.
2. An examples script: to sanity test go-babushka and similar go-clients against a redis host.
3. A benchmark app: to performance benchmark test go-babushka and similar go-clients against a redis host.

## Building

1) Build the Babushka-Core:  
   Navigate to `babushka/babushka-core`.  
   Run the command: `cargo build --release`.
2) Build the go-babushka within the Go Benchmarks:  
   Change your current directory to the babushkaclient in `babushka/go/benchmarks/babushkaclient`.   
   Execute the build command: cargo `build --release`.  
## Code style


Our project enforces a consistent coding style using go fmt, which is the standard code formatter for Go. To ensure your code conforms to this style, run the following command before every commit: `go fmt ./...`
This command should be executed from the `babushka/go` directory.

## Benchmarks

You can run benchmarks in your Go application at the `babushka/go/benchmarks/benchmarkApp` directory using the executable generated by the Go build process. To do this, first compile your application with the command in the directory:    
`go build -o main main.go`. You can set arguments using the args flag like:

```shell
./main -help
./main -resultsFile=output.csv -dataSize "100 1000" -concurrentTasks "10 100" -clients all -host localhost -port 6379 -clientCount "1 5" -tls
```

The following arguments are accepted:
* `resultsFile`: the results output file
* `concurrentTasks`: Number of concurrent tasks
* `clients`: one of: all|jedis|lettuce|babushka
* `clientCount`: Client count
* `host`: redis server host url
* `port`: redis server port number
* `tls`: redis TLS configured 
* `clusterModeEnabled`: redis cluster mode enabled 

### Troubleshooting

* Connection Timeout:
    * If you're unable to connect to redis, check that you are connecting to the correct host, port, and TLS configuration.
* Only server-side certificates are supported by the TLS configured redis.
* If your Go program has trouble finding the required dynamic library on a Linux system, ensure to set the LD_LIBRARY_PATH environment variable. For different operating systems, the equivalent environment variable should be adjusted accordingly.

