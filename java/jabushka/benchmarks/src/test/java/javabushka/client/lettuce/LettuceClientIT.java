/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package javabushka.client.lettuce;

import javabushka.client.utils.ChosenAction;
import javabushka.client.utils.Benchmarking;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;
import java.util.HashMap;

public class LettuceClientIT {

    LettuceClient lettuceClient;

    @Before
    public void initializeJedisClient() {
        lettuceClient = new LettuceClient();
        lettuceClient.connectToRedis();
    }

    @After
    public void closeConnection() {
        lettuceClient.closeConnection();
    }

    @Test public void testResourceSetGet() {
        int iterations = 100000;
        String value = "my-value";

        HashMap<ChosenAction, Benchmarking.Operation> actions = new HashMap<>();
        actions.put(ChosenAction.GET_EXISTING, () -> lettuceClient.get(Benchmarking.generateKeySet()));
        actions.put(ChosenAction.GET_NON_EXISTING, () -> lettuceClient.get(Benchmarking.generateKeyGet()));
        actions.put(ChosenAction.SET, () -> lettuceClient.set(Benchmarking.generateKeySet(), value));
    }
}
